<div class="archive-container">
    <header class="archive-header">
        <h1 class="archive-title">
            <i class="fas fa-archive"></i>
            文章归档
        </h1>
        <p class="archive-count">共 <%= site.posts.length %> 篇文章</p>
    </header>

    <div class="archives-by-year">
        <% var prev_year = '';
           site.posts.reverse().forEach(function(post) {
               var year = post.date.format('YYYY');
               if (prev_year !== year) {
                   if (prev_year !== '') { %>
                   </div>
                <%     }
                   prev_year = year;
        %>
                <div class="year-section">
                    <h2 class="year-title">
                        <i class="fas fa-calendar-alt"></i>
                        <%= year %>
                    </h2>
                    <div class="posts-list">
        <% } %>
                        <article class="post-item">
                            <div class="post-date">
                                <span class="date-month"><%= post.date.format('MM') %></span>
                                <span class="date-day"><%= post.date.format('DD') %></span>
                            </div>
                            <div class="post-info">
                                <h3 class="post-title">
                                    <a href="<%= config.root %><%= post.path %>"><%= post.title %></a>
                                </h3>
                                <% if (post.categories.length > 0) { %>
                                    <div class="post-categories">
                                        <% post.categories.forEach(function(cat) { %>
                                            <a href="<%= config.root %><%= cat.path %>" class="category-badge"><%= cat.name %></a>
                                        <% }); %>
                                    </div>
                                <% } %>
                            </div>
                        </article>
        <% }); %>
                    </div>
                </div>
    </div>
</div>
